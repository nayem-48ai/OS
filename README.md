# SSH + Tailscale GitHub Action

<!-- ржирж┐ржЪрзЗрж░ рж▓рж┐ржЩрзНржХрзЗ ржЖржкржирж╛рж░ ржЗржЙржЬрж╛рж░ржирзЗржо, рж░рж┐ржкрзЛржЬрж┐ржЯрж░рж┐рж░ ржирж╛ржо ржПржмржВ ьЫМэБмэФМыбЬьЪ░ ржлрж╛ржЗрж▓рзЗрж░ ржирж╛ржо ржжрж┐ржи -->
[![Workflow Status](https://github.com/USERNAME/REPOSITORY/actions/workflows/ssh-tailscale.yml/badge.svg)](https://github.com/USERNAME/REPOSITORY/actions/workflows/ssh-tailscale.yml)

ржПржЗ GitHub Actions ьЫМэБмэФМыбЬьЪ░ржЯрж┐ ржЖржкржирж╛ржХрзЗ ржЪрж╛рж╣рж┐ржжрж╛ ржЕржирзБржпрж╛рзЯрзА ржПржХржЯрж┐ ржЕрж╕рзНржерж╛рзЯрзА (temporary) Ubuntu SSH рж╕рж╛рж░рзНржнрж╛рж░ рждрзИрж░рж┐ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред ржПржЯрж┐ [Tailscale](https://tailscale.com/) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ ржирж┐рж░рж╛ржкржж ржкрзНрж░рж╛ржЗржнрзЗржЯ ржирзЗржЯржУрзЯрж╛рж░рзНржХ рждрзИрж░рж┐ ржХрж░рзЗ ржПржмржВ ржРржЪрзНржЫрж┐ржХржнрж╛ржмрзЗ **Tailscale Funnel** ржПрж░ ржорж╛ржзрзНржпржорзЗ SSH рж╕рж╛рж░рзНржнрж╛рж░ржЯрж┐ржХрзЗ ржкрж╛ржмрж▓рж┐ржХ ржЗржирзНржЯрж╛рж░ржирзЗржЯрзЗ ржкрзНрж░ржХрж╛рж╢ ржХрж░рзЗред

---

## тЬи ржлрж┐ржЪрж╛рж░рж╕ржорзВрж╣ (Features)

*   **ЁЯЪА ржЕржи-ржбрж┐ржорж╛ржирзНржб SSH рж╕рж╛рж░рзНржнрж╛рж░:** GitHub Actions рж░рж╛ржирж╛рж░-ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржорзБрж╣рзВрж░рзНрждрзЗрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ рж╕ржорзНржкрзВрж░рзНржг Ubuntu рж╕рж╛рж░рзНржнрж╛рж░ ржкрж╛ржиред
*   **ЁЯФТ ржирж┐рж░рж╛ржкржж ржХрж╛ржирзЗржХрж╢ржи:** Tailscale ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржирзНржб-ржЯрзБ-ржПржирзНржб ржПржиржХрзНрж░рж┐ржкрзНржЯрзЗржб ржХрж╛ржирзЗржХрж╢ржи ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗред
*   **ЁЯМР ржкрж╛ржмрж▓рж┐ржХ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ (ржРржЪрзНржЫрж┐ржХ):** Tailscale Funnel ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрзЛржирзЛ рж░ржХржо ржкрзЛрж░рзНржЯ ржлрж░ржУрзЯрж╛рж░рзНржбрж┐ржВ ржЫрж╛рзЬрж╛ржЗ ржЖржкржирж╛рж░ SSH рж╕рж╛рж░рзНржнрж╛рж░ржЯрж┐ ржкрж╛ржмрж▓рж┐ржХ ржбрзЛржорзЗржЗржирзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ржпрзЛржЧрзНржп рж╣рзЯред
*   **тП▒я╕П ржХрж╛рж╕рзНржЯржорж╛ржЗржЬржпрзЛржЧрзНржп рж░рж╛ржиржЯрж╛ржЗржо:** ржЖржкржирж╛рж░ ржкрзНрж░рзЯрзЛржЬржи ржЕржирзБржпрж╛рзЯрзА рж╕рж╛рж░рзНржнрж╛рж░ржЯрж┐ рзл ржорж┐ржирж┐ржЯ ржерзЗржХрзЗ рж╢рзБрж░рзБ ржХрж░рзЗ рзм ржШржгрзНржЯрж╛ ржкрж░рзНржпржирзНржд ржЪрж╛рж▓рзБ рж░рж╛ржЦрждрзЗ ржкрж╛рж░ржмрзЗржиред
*   **тЪЩя╕П ржорж╛рж▓рзНржЯрж┐-ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕:** ржПржХржЗ рж╕рж╛ржерзЗ ржПржХрж╛ржзрж┐ржХ SSH рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛрж░ рж╕рзБржмрж┐ржзрж╛ред
*   **ЁЯз╣ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржкрж░рж┐рж╖рзНржХрж░ржг:** ржкрзБрж░рж╛ржирзЛ ржбрж┐ржнрж╛ржЗрж╕ржЧрзБрж▓рзЛ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржЖржкржирж╛рж░ tailnet ржерзЗржХрзЗ ржорзБржЫрзЗ ржлрзЗрж▓рж╛рж░ ржмрзНржпржмрж╕рзНржерж╛ред

---

## ЁЯЫая╕П ржкрзНрж░рзЯрзЛржЬржирзАрзЯрждрж╛ (Prerequisites)

ржПржЗ ьЫМэБмэФМыбЬьЪ░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржЬржирзНржп ржЖржкржирж╛рж░ ржХрж┐ржЫрзБ ржЬрж┐ржирж┐рж╕ ржЖржЧрзЗ ржерзЗржХрзЗ ржкрзНрж░рж╕рзНрждрзБржд рж░рж╛ржЦрждрзЗ рж╣ржмрзЗред

1.  **Tailscale ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ:** ржЖржкржирж╛рж░ ржПржХржЯрж┐ ржмрж┐ржирж╛ржорзВрж▓рзНржпрзЗ [Tailscale ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ](https://login.tailscale.com/start) ржерж╛ржХрждрзЗ рж╣ржмрзЗред
2.  **Tailscale API Key:** ьЫМэБмэФМыбЬьЪ░ржЯрж┐ржХрзЗ ржЖржкржирж╛рж░ tailnet-ржПрж░ ржбрж┐ржнрж╛ржЗрж╕ржЧрзБрж▓рзЛ ржорзНржпрж╛ржирзЗржЬ ржХрж░рж╛рж░ ржЕржирзБржорждрж┐ ржжрзЗржУрзЯрж╛рж░ ржЬржирзНржпред
    *   **ржХрж┐ржнрж╛ржмрзЗ ржкрж╛ржмрзЗржи:** Tailscale Admin Console-ржП ржпрж╛ржи, рждрж╛рж░ржкрж░ **Settings > Keys > Generate API key...** рждрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред `Admin` ржкрж╛рж░ржорж┐рж╢ржирж╕рж╣ ржПржХржЯрж┐ ржХрзА рждрзИрж░рж┐ ржХрж░рзБржиред
3.  **Tailscale Auth Key:** GitHub Actions рж░рж╛ржирж╛рж░ржХрзЗ ржЖржкржирж╛рж░ tailnet-ржП ржкрзНрж░ржорж╛ржгрзАржХрж░ржг (authenticate) ржХрж░рж╛рж░ ржЬржирзНржпред
    *   **ржХрж┐ржнрж╛ржмрзЗ ржкрж╛ржмрзЗржи:** Admin Console-ржП ржпрж╛ржи, рждрж╛рж░ржкрж░ **Settings > Keys > Generate auth key...** рждрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред ржХрзА-ржЯрж┐ `Reusable` ржПржмржВ `Ephemeral` рж╣рж▓рзЗ ржнрж╛рж▓рзЛ рж╣рзЯред

---

## ЁЯЪА ржХрж┐ржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи

1.  ржПржЗ рж░рж┐ржкрзЛржЬрж┐ржЯрж░рж┐рж░ `.github/workflows/` ржлрзЛрж▓рзНржбрж╛рж░рзЗ ьЫМэБмэФМыбЬьЪ░ (`.yml`) ржлрж╛ржЗрж▓ржЯрж┐ ржпрзЛржЧ ржХрж░рзБржиред
2.  ржЖржкржирж╛рж░ GitHub рж░рж┐ржкрзЛржЬрж┐ржЯрж░рж┐рж░ **Actions** ржЯрзНржпрж╛ржмрзЗ ржпрж╛ржиред
3.  ржмрж╛ржо ржкрж╛рж╢рзЗрж░ рж╕рж╛ржЗржбржмрж╛рж░ ржерзЗржХрзЗ **SSH + Tailscale** ьЫМэБмэФМыбЬьЪ░ржЯрж┐ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржиред
4.  **Run workflow** ржбрзНрж░ржкржбрж╛ржЙржи ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред
5.  ржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржЗржиржкрзБржЯржЧрзБрж▓рзЛ (ржирж┐ржЪрзЗрж░ ржЯрзЗржмрж┐рж▓рзЗ ржмрж░рзНржгрж┐ржд) ржкрзВрж░ржг ржХрж░рзБржи ржПржмржВ **Run workflow** ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред
6.  ьЫМэБмэФМыбЬьЪ░ рж░рж╛ржи рж╣ржУрзЯрж╛рж░ ржкрж░, рж▓ржЧ ржерзЗржХрзЗ ржЖржкржирж╛рж░ SSH ржХрж╛ржирзЗржХрж╢ржирзЗрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рждржерзНржп (рж╣рзЛрж╕рзНржЯржирзЗржо, ржЖржЗржкрж┐ ржПржмржВ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб) ржкрзЗрзЯрзЗ ржпрж╛ржмрзЗржиред

---

## ЁЯУЭ ьЫМэБмэФМыбЬьЪ░ ржЗржиржкрзБржЯ (Parameters)

| ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░         | ржмрж░рзНржгржирж╛                                                                              | ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХ? | ржбрж┐ржлрж▓рзНржЯ ржорж╛ржи |
|--------------------|-------------------------------------------------------------------------------------|:-----------:|:------------:|
| `ts_tailnet`       | ржЖржкржирж╛рж░ Tailscale ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрзЗрж░ ржЗржорзЗржЗрж▓ ржмрж╛ ржЕрж░рзНржЧрж╛ржирж╛ржЗржЬрзЗрж╢ржирзЗрж░ ржирж╛ржоред                             |     рж╣рзНржпрж╛ржБ     |      -       |
| `ts_api_key`       | ржбрж┐ржнрж╛ржЗрж╕ ржорзНржпрж╛ржирзЗржЬ ржХрж░рж╛рж░ ржЬржирзНржп Tailscale API ржХрзАред                                           |     рж╣рзНржпрж╛ржБ     |      -       |
| `ts_authkey`       | ржирждрзБржи ржбрж┐ржнрж╛ржЗрж╕ржХрзЗ tailnet-ржП ржпрзБржХрзНржд ржХрж░рж╛рж░ ржЬржирзНржп Auth ржХрзАред                                       |     рж╣рзНржпрж╛ржБ     |      -       |
| `ssh_user`         | SSH ржХрж╛ржирзЗржХрж╢ржирзЗрж░ ржЬржирзНржп ржпрзЗ ржЗржЙржЬрж╛рж░ржирзЗржо рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржмрзЗред                                        |     рж╣рзНржпрж╛ржБ     |  `ubuntu`    |
| `ssh_password`     | рждрзИрж░рж┐ ржХрж░рж╛ SSH ржЗржЙржЬрж╛рж░рзЗрж░ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржбред **рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи!**                |     рж╣рзНржпрж╛ржБ     |      -       |
| `quick_test`       | `true` рж╕рзЗржЯ ржХрж░рж╛ рж╣рж▓рзЗ, рж╕рж╛рж░рзНржнрж╛рж░ржЯрж┐ ржорж╛рждрзНрж░ рзл ржорж┐ржирж┐ржЯрзЗрж░ ржЬржирзНржп рж░рж╛ржи рж╣ржмрзЗред                             |      ржирж╛      |   `false`    |
| `runtime_minutes`  | рж╕рж╛рж░рзНржнрж╛рж░ржЯрж┐ ржХржд ржорж┐ржирж┐ржЯ ржЪрж╛рж▓рзБ ржерж╛ржХржмрзЗ (рж╕рж░рзНржмрзЛржЪрзНржЪ рзйрзмрзж)ред                                           |      ржирж╛      |    `355`     |
| `do_purge`         | `true` рж╣рж▓рзЗ, ьЫМэБмэФМыбЬьЪ░ рж╢рзБрж░рзБ рж╣ржУрзЯрж╛рж░ ржЖржЧрзЗ `bullet` ржирж╛ржорзЗрж░ ржкрзБрж░рж╛ржирзЛ ржбрж┐ржнрж╛ржЗрж╕ржЧрзБрж▓рзЛ ржорзБржЫрзЗ ржлрзЗрж▓ржмрзЗред  |      ржирж╛      |    `true`    |
| `cycles`           | `0` ржПрж░ ржмрзЗрж╢рж┐ рж╣рж▓рзЗ, ржПржЗ рж░рж╛ржи рж╢рзЗрж╖ рж╣ржУрзЯрж╛рж░ ржкрж░ ьЫМэБмэФМыбЬьЪ░ржЯрж┐ ржирж┐ржЬрзЗржХрзЗ ржЖржмрж╛рж░ ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░ржмрзЗред         |      ржирж╛      |     `0`      |
| `instance_count`   | ржПржХржЗ рж╕рж╛ржерзЗ ржХрждржЧрзБрж▓рзЛ SSH рж╕рж╛рж░рзНржнрж╛рж░ рждрзИрж░рж┐ ржХрж░рждрзЗ ржЪрж╛ржи (рзз-рззрзж)ред                                   |      ржирж╛      |     `1`      |

---

## ЁЯФЧ ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░ржмрзЗржи

ьЫМэБмэФМыбЬьЪ░ рж╕ржлрж▓ржнрж╛ржмрзЗ рж░рж╛ржи рж╣рж▓рзЗ, ржЖржкржирж┐ рж▓ржЧ ржЖржЙржЯржкрзБржЯрзЗ ржирж┐ржЪрзЗрж░ ржорждрзЛ ржорзЗрж╕рзЗржЬ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржи:

```bash
тЬЕ SSH is ready!
Connect with:
ssh ubuntu@bullet   (or ssh ubuntu@100.x.x.x)
Password: your_chosen_password
```

ржЖржкржирж┐ ржЖржкржирж╛рж░ рж▓рзЛржХрж╛рж▓ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ ржерзЗржХрзЗ ржПржЗ ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред
<details>
<summary>ЁЯТб ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ржб ржлрж┐ржЪрж╛рж░ (ржХрзНрж▓рж┐ржХ ржХрж░рзЗ ржжрзЗржЦрзБржи)</summary>
ржПржХрж╛ржзрж┐ржХ ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ ржЪрж╛рж▓рж╛ржирзЛ
instance_count ржПрж░ ржорж╛ржи 1 ржПрж░ ржмрзЗрж╢рж┐ рж╕рзЗржЯ ржХрж░рзЗ ржЖржкржирж┐ ржПржХрж╕рж╛ржерзЗ ржПржХрж╛ржзрж┐ржХ SSH рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред ржкрзНрж░рждрж┐ржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржПржХржЯрж┐ ржЗржЙржирж┐ржХ рж╣рзЛрж╕рзНржЯржирзЗржо ржерж╛ржХржмрзЗ (ржпрзЗржоржи bullet1, bullet2, ржЗрждрзНржпрж╛ржжрж┐)ред
рж╕рж╛ржЗржХрзЗрж▓ ржмрж╛ ржЪрзЗржЗржи рж░рж╛ржи
cycles ржЗржиржкрзБржЯрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржЖржкржирж┐ ржПржХржЯрж┐ рж░рж╛ржи рж╢рзЗрж╖ рж╣ржУрзЯрж╛рж░ ржкрж░ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ ржЖрж░рзЗржХржЯрж┐ рж░рж╛ржи рж╢рзБрж░рзБ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред ржПржЯрж┐ ржжрзАрж░рзНржШ рж╕ржорзЯ ржзрж░рзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ рж░рж╛ржЦрж╛рж░ ржПржХржЯрж┐ ржЙржкрж╛рзЯред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, cycles ржПрж░ ржорж╛ржи 2 ржжрж┐рж▓рзЗ ржмрж░рзНрждржорж╛ржи рж░рж╛ржирж╕рж╣ ржорзЛржЯ ржжрзБржЯрж┐ рж░рж╛ржи (ржкрзНрж░рж╛рзЯ рзм+рзм ржШржгрзНржЯрж╛) ржЪрж▓ржмрзЗред
</details>
тЪая╕П ржирж┐рж░рж╛ржкрждрзНрждрж╛ рж╕рждрж░рзНржХрждрж╛: Tailscale Funnel ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржЖржкржирж╛рж░ SSH рж╕рж╛рж░рзНржнрж╛рж░ржЯрж┐ ржкрж╛ржмрж▓рж┐ржХ ржЗржирзНржЯрж╛рж░ржирзЗржЯрзЗ ржЙржирзНржорзБржХрзНржд рж╣рзЯрзЗ ржпрж╛рзЯред рж╕рж░рзНржмржжрж╛ ржПржХржЯрж┐ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржПржмржВ ржЗржЙржирж┐ржХ ssh_password ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред ржХрж╛ржЬ рж╢рзЗрж╖рзЗ ьЫМэБмэФМыбЬьЪ░ржЯрж┐ ржмржирзНржз рж╣рзЯрзЗржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржиред
