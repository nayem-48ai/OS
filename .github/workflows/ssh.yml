name: Terminus SSH Serveo
on: 
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  ssh-access:
    runs-on: ubuntu-latest
    steps:
      - name: Setup User and SSH
        run: |
          # ইউজার তৈরি
          sudo useradd -m -s /bin/bash tnayem48
          echo "tnayem48:tnayem48" | sudo chpasswd
          sudo usermod -aG sudo tnayem48
          sudo service ssh start
          
      - name: Start Serveo Tunnel
        run: |
          echo "Starting Tunnel..."
          # Serveo দিয়ে পোর্ট ফরওয়ার্ডিং (অ্যাকাউন্ট লাগে না)
          # এটি একটি র্যান্ডম সাবডোমেন তৈরি করবে
          ssh -o StrictHostKeyChecking=no -R 80:localhost:22 serveo.net > tunnel.txt 2>&1 &
          
          sleep 10
          echo "------------------------------------------"
          echo "   LOGIN DETAILS FOR TERMINUS APP   "
          echo "------------------------------------------"
          echo "Host: serveo.net"
          echo "Port: (Check the Forwarding line below)"
          echo "Username: tnayem48"
          echo "Password: tnayem48"
          echo "------------------------------------------"
          # লাইভ পোর্ট দেখার জন্য লুপ
          tail -f tunnel.txt | grep -i "Forwarding"
